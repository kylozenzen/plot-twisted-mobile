/* --- THEME & TOKENS --- */
:root{
  --bg-color:#ffffff;
  --text-color:#2c2c2c;
  --surface-color:#f1f5f9;
  --primary-color:#007bff;
  --key-bg-color:#f1f5f9;
  --key-text-color:#2c2c2c;
  --disabled-key-bg:#adb5bd;
  --disabled-key-text:#6c757d;
  --accent-pen-red:#d90429;
  --accent-pen-green:#2a9d8f;
  --font-display:'Patrick Hand',cursive;
  --font-body:'Roboto',sans-serif;
  --font-ticket:'VT323',monospace;
}
body.dark-mode{
  --bg-color:#121212;--text-color:#e0e0e0;--surface-color:#2c2c2c;
  --primary-color:#3a86ff;--key-bg-color:#444;--key-text-color:#e0e0e0;
}

/* --- BASE --- */
*{box-sizing:border-box;margin:0;padding:0}
html,body{
  height:100vh;max-height:100vh;overflow:hidden;
  font-family:var(--font-body);
  background:var(--bg-color);color:var(--text-color);
  -webkit-tap-highlight-color:transparent;
  transition:background .3s,color .3s;
}
.app-container{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;position:relative}
.screen{
  display:none;flex-direction:column;align-items:center;justify-content:flex-start;
  width:100%;height:100%;opacity:1;background:var(--bg-color);
  position:absolute;inset:0;z-index:5;transition:opacity .4s ease,background .3s;padding:20px
}
.screen.active{display:flex;z-index:10}
.screen:not(.active){opacity:0;pointer-events:none;z-index:1}
.screen-content{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;width:100%;max-width:700px;height:100%;text-align:center}

/* --- COMMON UI --- */
.logo{font-family:var(--font-display);color:var(--text-color);font-size:clamp(2.5rem,10vw,3.5rem);margin-bottom:30px}
.logo.logo-small{font-size:clamp(2rem,8vw,2.5rem);margin-bottom:20px;flex-shrink:0}
.btn{
  font-family:var(--font-display);font-size:1.3rem;text-transform:uppercase;cursor:pointer;
  border:2px solid var(--text-color);background:transparent;color:var(--text-color);
  padding:15px 25px;transition:all .2s;margin:8px;border-radius:8px;
  box-shadow:3px 3px 0 var(--text-color);width:100%;max-width:320px
}
.btn:active{transform:translate(3px,3px) scale(.98);box-shadow:0 0 0 var(--text-color)}
.btn.disabled,.btn:disabled{opacity:.5;pointer-events:none;background:var(--disabled-key-bg);color:var(--disabled-key-text);box-shadow:none}

#startScreen .screen-content{justify-content:center}
#startScreen .main-buttons{display:flex;flex-direction:column;align-items:center;gap:15px;width:100%}
#startScreen .sub-buttons{display:grid;grid-template-columns:1fr 1fr;gap:10px;width:100%;max-width:320px;margin-top:20px}
#startScreen .sub-buttons .btn{font-size:1.1rem;padding:12px 15px}

/* --- CATEGORY SCREEN --- */
#categoryScreen .screen-content{max-width:500px}
.category-grid{
  display:grid;grid-template-columns:repeat(2,1fr);gap:15px;width:100%;
  overflow-y:auto;padding:5px 5px 80px 5px;flex-grow:1
}
.category-btn{
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  background:var(--surface-color);border:2px solid var(--text-color);
  border-radius:12px;padding:15px 10px;text-align:center;cursor:pointer;
  transition:all .2s;width:100%;height:130px;box-shadow:3px 3px 0 var(--text-color)
}
.category-btn:active{transform:translate(3px,3px);box-shadow:none}
.category-btn.selected{border-color:var(--primary-color);background:#e9f3ff}
body.dark-mode .category-btn.selected{background:#2a3a5c}
.poster-emoji{font-size:2.5rem;margin-bottom:10px;line-height:1}
.tape-label{font-weight:700;font-size:1rem;color:var(--text-color)}
.bottom-bar{padding-top:15px;width:100%;background:var(--bg-color);flex-shrink:0}
.scroll-indicator{font-size:.8rem;color:#aaa;margin-top:10px;animation:bounce 2s infinite}

/* --- GAME HEADER --- */
#gameScreen{padding:0}
.game-header{
  width:100%;padding:10px 15px;background:var(--surface-color);
  border-bottom:2px solid var(--primary-color);flex-shrink:0;display:grid;
  grid-template-columns:1fr auto 1fr auto;align-items:center;z-index:20;gap:10px
}
.game-header .progress-display,.game-header .score-display{font-family:var(--font-ticket);font-size:1.4rem;color:var(--text-color)}
.game-header .progress-display{text-align:left}
.game-header .score-display{text-align:right;color:var(--primary-color)}
.game-header .finish-btn{text-align:right}
.btn-small{padding:5px 12px;font-size:1rem;margin:0;box-shadow:none;max-width:none;width:auto;background:#a9a9a9;border-color:#999;color:#fff}
.strikes-display{display:flex;gap:6px;justify-content:center;align-items:center}
.strikes-display i{font-size:1.8rem;color:var(--primary-color);transition:color .3s,opacity .3s}
.strikes-display i.used{color:var(--disabled-key-bg);opacity:.5}

/* category mini pill (optional) */
.category-pill{
  width:100%;max-width:700px;margin:6px auto 0 auto;padding:4px 10px;
  font-family:var(--font-ticket);font-size:1rem;color:#fff;background:var(--primary-color);
  border-radius:999px;text-align:center;display:none
}

/* --- GAME BODY --- */
#game-content-area{width:100%;flex-grow:1;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:20px;overflow-y:auto}
.screen-box{
  background:var(--surface-color);border:none;box-shadow:0 0 20px var(--primary-color);
  padding:20px;border-radius:10px;font-size:1.2rem;line-height:1.5;margin:0 auto 15px auto;
  width:100%;max-width:600px;display:flex;flex-direction:column;justify-content:center;text-align:center;
  min-height:120px
}
.clue-feedback{font-size:1.5rem;font-family:var(--font-display)}
.clue-feedback.correct{color:var(--accent-pen-green)}
.clue-feedback.incorrect{color:var(--accent-pen-red)}

.action-btn-row{display:flex;justify-content:center;gap:10px;margin-bottom:20px;width:100%;max-width:600px}
.action-btn-row .btn{flex-grow:1;padding:10px 15px;font-size:1.1rem;max-width:150px}

.word-display{
  font-family:var(--font-ticket);font-size:clamp(1.5rem,6vw,2rem);letter-spacing:6px;margin-bottom:20px;
  text-align:center;min-height:40px;padding:10px;border-radius:6px;background:var(--surface-color);
  width:100%;max-width:600px;word-wrap:break-word;line-height:1.2
}

/* Keyboard */
#keyboard-area{width:100%;padding:10px;background:var(--bg-color);flex-shrink:0;position:relative}
.keyboard{display:flex;flex-direction:column;gap:8px;max-width:700px;margin:0 auto}
.keyboard-row{display:flex;justify-content:center;gap:6px}
.key{
  font-family:var(--font-body);font-weight:bold;height:50px;flex:1 1 0;font-size:1rem;
  border:1px solid #ccc;border-radius:6px;background:var(--key-bg-color);color:var(--key-text-color);
  cursor:pointer;transition:transform .1s;padding:0 5px
}
.key:active{transform:scale(.95)}
.key.disabled{background:var(--disabled-key-bg);color:var(--disabled-key-text);pointer-events:none;opacity:.7}

/* Continue overlay (hidden by default; appears after correct/skip) */
#continue-overlay{position:absolute;inset:0;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center;z-index:100}
#continue-overlay.visible{display:flex}
#continue-overlay .btn{background:var(--primary-color);color:#000;border:none}

/* --- SETTINGS & MISC --- */
.settings-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;width:100%;max-width:800px;margin-bottom:20px}
.setting-item{background:var(--surface-color);border:1px solid #ccc;padding:15px;text-align:center;border-radius:5px}
body.dark-mode .setting-item{border-color:#444}
.setting-title{font-family:var(--font-display);font-size:1.2rem;color:var(--text-color)}
.toggle-switch{width:50px;height:25px;background:#ccc;cursor:pointer;border:1px solid #aaa;position:relative;border-radius:15px;margin:10px auto 0}
.toggle-switch.active{background:var(--accent-pen-green)}
.toggle-switch::after{content:'';position:absolute;top:2px;left:2px;width:19px;height:19px;background:#fff;transition:transform .3s;border-radius:50%}
.toggle-switch.active::after{transform:translateX(25px)}
.length-btn{padding:6px 10px;border:2px solid var(--primary-color);background:transparent;color:var(--primary-color);font-family:var(--font-display);font-size:.8rem;cursor:pointer;border-radius:5px;margin:5px}
.length-btn.selected{background:var(--primary-color);color:#fff}

/* Game Over & Credits */
#gameOverScreen,#creditsScreen{background:#fff;color:#2c2c2c;justify-content:center}
body.dark-mode #gameOverScreen,body.dark-mode #creditsScreen{background:var(--bg-color);color:var(--text-color)}
.receipt-container{background:#faf8f0;border:1px solid #ccc;width:100%;max-width:350px;padding:20px;font-family:var(--font-ticket);font-size:1.2rem;box-shadow:5px 5px 15px rgba(0,0,0,.2);text-align:center;color:#2c2c2c}
body.dark-mode .receipt-container{background:var(--surface-color);border-color:#444;color:var(--text-color)}
.receipt-header{font-size:1.5rem;text-transform:uppercase;border-bottom:1px dashed #999;padding-bottom:10px;margin-bottom:10px}
.receipt-list{list-style:none;padding:0;margin:0;text-align:left}
.receipt-list li{display:flex;justify-content:space-between;margin-bottom:8px}
.receipt-total{border-top:1px dashed #999;padding-top:10px;margin-top:10px;font-weight:700;font-size:1.4rem}

.credits-roll{width:100%;max-width:600px;height:80%;overflow:auto;background:var(--surface-color);border-radius:8px;padding:15px}
.credit-item{margin-bottom:15px;text-align:center;font-size:1.2rem;border-bottom:1px solid #ddd;padding-bottom:10px}
.credit-item:last-child{border-bottom:none}
.credit-item .title{font-family:var(--font-body);font-weight:700;color:var(--primary-color)}
.credit-item .status-correct{font-family:var(--font-ticket);color:var(--accent-pen-green)}
.credit-item .status-incorrect{font-family:var(--font-ticket);color:var(--accent-pen-red)}

.confirm-modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:200;align-items:center;justify-content:center;padding:20px}
.confirm-modal.active{display:flex}
.confirm-box{background:var(--bg-color);padding:30px;border:2px solid var(--text-color);text-align:center;box-shadow:5px 5px 15px rgba(0,0,0,.3);border-radius:8px}
.confirm-box h3{font-family:var(--font-display);font-size:1.5rem;margin-bottom:20px}
.confirm-box .btn-row{display:flex;gap:10px}

/* How To Play */
#howToPlayScreen .screen-content{justify-content:flex-start}
.how-to-play-scroll-box{width:100%;max-width:500px;overflow-y:auto;padding-right:15px;flex-grow:1;text-align:left}
.how-to-play-scroll-box h3{font-family:var(--font-display);font-size:1.5rem;margin-top:20px;margin-bottom:10px;color:var(--primary-color)}
.how-to-play-scroll-box p,.how-to-play-scroll-box li{margin-bottom:15px;line-height:1.6}
.how-to-play-scroll-box ul{list-style-position:inside;padding-left:0}
#howToPlayScreen .btn{margin-top:20px;flex-shrink:0}

/* Animations */
@keyframes bounce{
  0%,20%,50%,80%,100%{transform:translateY(0)}
  40%{transform:translateY(-10px)}
  60%{transform:translateY(-5px)}
}
@keyframes shake{
  0%,100%{transform:translateX(0)}
  10%,30%,50%,70%,90%{transform:translateX(-5px)}
  20%,40%,60%,80%{transform:translateX(5px)}
}
.animate-shake{animation:shake .5s ease-in-out}
